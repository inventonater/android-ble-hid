# BLE HID for Android and Unity

## Project Structure

This project implements a Bluetooth Low Energy HID (Human Interface Device) library for Android that supports:
- Mouse emulation
- Media control (play/pause, volume, etc.)
- Keyboard input

The codebase is organized into the following modules:

### Core Module (`core/`)
- Contains all the shared BLE HID functionality
- Acts as a single source of truth for all Bluetooth code
- Is the foundation used by both the Android app and Unity plugin

### Android App Module (`app/`)
- Sample Android application that demonstrates the BLE HID functionality
- Depends on the core module for all Bluetooth implementation

### Unity Plugin Module (`unity-plugin/`)
- Unity integration layer that provides easy access to BLE HID in Unity projects
- Depends on the core module as a library dependency (not code duplication)
- Wraps the core functionality in Unity-friendly APIs

### Unity Test Project (`unity-test/`)
- Example Unity project that shows how to use the BLE HID plugin
- Uses the AAR generated by the unity-plugin module

## Architecture: Single Source of Truth

This project follows a "single source of truth" architecture to ensure consistency across platforms:

1. All Bluetooth functionality is implemented in the **core module**
2. No Bluetooth code is duplicated between modules
3. The Android app and Unity plugin both use the core module as a dependency
4. Changes made to the core module are automatically reflected in both platforms

This approach offers several advantages:
- Bug fixes are automatically applied to both platforms
- New features are immediately available everywhere
- Consistent behavior between Android and Unity implementations
- Simplified maintenance and testing

## Building

### Android App
```
./gradlew :app:assembleDebug
```

### Unity Plugin
```
./gradlew :unity-plugin:assembleRelease :unity-plugin:copyToUnity
```
This will build the AAR and copy it to the Unity project's Plugins/Android folder.

## Development

When making changes to the BLE HID functionality:

1. Make all Bluetooth-related changes in the **core** module
2. Only implement platform-specific adaptations in the respective modules
3. For the Unity plugin, use the Unity-specific wrapper classes in `unity-plugin/src/main/java/com/example/blehid/unity/`
